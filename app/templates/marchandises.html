<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>Marchandises</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
  <header>
    <h1>Marchandises</h1>
    <nav>
      <a href="/">Accueil</a>
      <a href="/navires">Navires</a>
      <a href="/ports">Ports</a>
      <a href="/manifests">Manifests</a>
      <a href="/inspections">Inspections</a>
    </nav>
  </header>

  <section class="card">
    <h2>Liste des marchandises</h2>
    <ul class="list">
      {% for marchandise in marchandises %}
        <li>
          <strong>{{ marchandise.nom }}</strong>
          — Tracking: {{ marchandise.tracking_number }}
          — Type: {{ marchandise.type if marchandise.type else "N/A" }}
          — Poids: {{ marchandise.poids }} tonnes
          — Volume: {{ marchandise.volume }} m³
          — Navire ID: {{ marchandise.navire_id }}

          <form action="/marchandises/{{ marchandise.id }}/edit" method="get" style="display:inline;">
            <button type="submit">Modifier</button>
          </form>
          <form action="/marchandises/{{ marchandise.id }}/delete" method="post" style="display:inline;">
            <button type="submit" onclick="return confirm('Supprimer cette marchandise ?')">Supprimer</button>
          </form>
          <!-- ➜ Nouveau bouton Télécharger la fiche -->
          <form action="/marchandises/{{ marchandise.id }}/download" method="get" style="display:inline;">
            <button type="submit">Télécharger la fiche</button>
          </form>
        </li>
      {% else %}
        <li>Aucune marchandise enregistrée.</li>
      {% endfor %}
    </ul>
  </section>

  <section class="card">
    <h2>Ajouter une marchandise</h2>
    <form action="/marchandises/add" method="post">
      <div class="form-row"><label>Nom</label><input type="text" name="nom" required></div>
      <div class="form-row"><label>Type</label><input type="text" name="type"></div>
      <div class="form-row"><label>Poids (tonnes)</label><input type="number" step="0.01" name="poids" required></div>
      <div class="form-row"><label>Volume (m³)</label><input type="number" step="0.01" name="volume" required></div>
      <div class="form-row"><label>Numéro de tracking</label><input type="text" name="tracking_number" required></div>

      <div class="form-row">
        <label>Navire</label>
        <select name="navire_id" required>
          {% for navire in navires %}
            <option value="{{ navire.id }}">{{ navire.nom }} — IMO: {{ navire.imo }}</option>
          {% endfor %}
        </select>
      </div>

      <button type="submit">Ajouter</button>
    </form>
  </section>

  <footer>
    MarineGab — Libreville, Gabon © 2025
  </footer>
</body>
</html>
